(function(){try{(function(){function b(n,p,o){if(n.addEventListener){n.addEventListener(p,o);}else{n.attachEvent("on"+p,function(q){q=q||window.event;q.preventDefault=q.preventDefault||function(){q.returnValue=false;};q.stopPropagation=q.stopPropagation||function(){q.cancelBubble=true;};o.call(self,q);});}}var j="index.html",l=("https:"==document.location.protocol)?"https:":"http:",k=l+"//widget.trustpilot.com",i=l+"//widget.trustpilot.com/trustboxes";function h(n){this.id=c();this.container=n;this.options={frameBorder:0,allowTransparency:"true",scrolling:"no",styles:{borderStyle:"none",backgroundColor:"transparent",display:"block",overflow:"hidden",height:0,width:0}};this.hasSentImpression=false;this.queryString=this.createQueryStringFromDataSet();this.iframes={};this.applyWidget();}h.prototype={applyWidget:function(){var p=this,q,n,o;if(!this.container){throw"Unable to locate a widget container";}this.container.style.position="relative";q=this.container.getAttribute("data-template-id");n=this.container.getAttribute("data-businessunit-id");o=this.container.getAttribute("data-locale");if(!q||!n||!o){throw"Missing template id, business unit id or locale";}this.options.styles.height=this.getHeightAttribute();this.options.styles.width=this.getWidthAttribute();this.options.show=true;this.baseUrl=i+"/"+q+"/";this.options.source=j;this.createIFrame("main",this.options);b(window,"message",function(s){if(s.origin!==k||typeof(s.data)!=="string"){return;}var u;try{u=JSON.parse(s.data);}catch(t){console.log("Invalid data sent on widget: "+s.data);return;}var r={data:u,origin:s.origin};if(r.data.widgetId!==p.id){return;}p.widgetIframeMessageHandler(r);},false);},getWidthAttribute:function(){var n=this.container.getAttribute("data-style-width").toLowerCase();return d(n);},getHeightAttribute:function(){var n=this.container.getAttribute("data-style-height").toLowerCase();return d(n);},widgetIframeMessageHandler:function(n){switch(n.data.command){case"createIFrame":this.createIFrame(n.data.name,n.data);break;case"setStyle":this.setStyle(n.data.name,n.data.style);break;case"loaded":this.sendLoadedToMainFrame();break;case"message":this.sendMessage(this.iframes[n.data.name],n.data);break;case"resize-height":this.resizeHeight(n.data.name,n.data.height);break;case"impression":if(this.hasSentImpression){return;}this.hasSentImpression=true;this.sendMessage(this.iframes.main,{command:"impression-received",url:window.document.URL,referrer:window.document.referrer,userAgent:window.navigator.userAgent,language:window.navigator.userLanguage||window.navigator.language,platform:window.navigator.platform});break;}},getElementDataSet:function(){var o=0,n={},q,p,r;if(typeof this.container.dataset==="undefined"){if(!this.container.attributes){return undefined;}for(o;o<this.container.attributes.length;o++){q=this.container.attributes[o];p=q.name.match(/^data-(.+)$/i);if(p){r=this.toCamelCase(p[1]);n[r]=q.value;}}return n;}else{return this.container.dataset;}},createQueryStringFromDataSet:function(){var o=this.getElementDataSet();var p="?";var n;for(n in o){p+=n+"="+encodeURIComponent(o[n])+"&";}return p.replace(/(\&|\?)+$/,"");},createIFrame:function(p,n){var o=g(e(n,this.options,this.baseUrl,this.queryString)),q=this;this.iframes[p]=o;this.container.appendChild(o);b(o,"load",function(){q.setWidgetId(o);});},setStyle:function(o,q){var n=this.iframes[o]||this.iframes.main;for(var p in q){n.style[p]=q[p];}},sendLoadedToMainFrame:function(){this.sendMessage(this.iframes.main,"loaded");},resizeHeight:function(p,n){if(typeof(n)!=="number"){return;}var o=this.iframes[p]||this.iframes.main;if(o){o.style.height=n+"px";}},sendMessage:function(n,o){o=JSON.stringify(o);n.contentWindow.postMessage(o,k);},setWidgetId:function(n){this.sendMessage(n,{command:"setId",widgetId:this.id});},toCamelCase:function(n){return n.replace(/(\-[a-z])/g,function(o){return o.toUpperCase().replace("-","");});}};function e(o,p,n,r){var q=p?p:{};q.position=o.styles.position||"";q.zindex=o.styles.zindex||"";q.margin=o.styles.margin||"";q.top=o.styles.top||"";q.bottom=o.styles.bottom||"";q.left=o.styles.left||"";q.right=o.styles.right||"";q.height=o.styles.height||"";q.width=o.styles.width||p.styles.width||"";q.display=o.show?"block":"none";q.src=n+o.source+r;q.borderStyle=p.styles.borderStyle;q.overflow=p.styles.overflow;return q;}function g(o){var n=document.createElement("iframe");n.style.position=o.position;n.style.zIndex=o.zindex;n.style.margin=o.margin;n.style.top=o.top;n.style.bottom=o.bottom;n.style.left=o.left;n.style.right=o.right;n.style.height=o.height;n.style.width=o.width;n.style.borderStyle=o.borderStyle;n.style.backgroundColor=o.backgroundColor;n.style.display=o.display;n.style.overflow=o.overflow;n.frameBorder=o.frameBorder;n.scrolling=o.scrolling;n.allowTransparency=o.allowTransparency;n.src=o.src;return n;}function d(n){var o=/(px|\%)/i;var p="";if(n&&n.length>0){if(o.test(n)){p=n;}else{p=n+"px";}}return p;}function f(){var s,o,r,n,p,q;if(document.getElementsByClassName){s=document.getElementsByClassName("trustpilot-widget");}else{if(document.querySelectorAll){s=document.querySelectorAll(".trustpilot-widget");}else{o=[];r=new RegExp("(^| )trustpilot-widget( |$)");n=document.body.getElementsByTagName("*");for(p=0,q=n.length;p<q;p++){if(r.test(n[p].className)){o.push(n[p]);}}s=o;}}return s;}function c(){var n=Math.random();if(c[n]){return c();}c[n]=true;return n;}function m(){this.loading=true;return this;}m.prototype.initializeOnPageLoad=function(){if(this.loading){var n=5;if(document.readyState!=="complete"){setTimeout(function(){window.Trustpilot.Modules.WidgetManagement.initializeOnPageLoad();},n);}else{window.Trustpilot.Modules.WidgetManagement.findAndApplyWidgets();}}};m.prototype.findAndApplyWidgets=function(){this.loading=true;var p=f();if(!p||p.length<1){this.loading=false;return;}var o=p.length;for(var n=0;n<o;n++){new h(p[n]);}this.loading=false;};m.prototype.removeWidgets=function(){var n=f();for(var o=0;o<n.length;++o){while(n[o].firstChild){n[o].removeChild(n[o].firstChild);}}};window.Trustpilot=window.Trustpilot||{};window.Trustpilot.Modules=window.Trustpilot.Modules||{};window.Trustpilot.Modules.WidgetManagement=window.Trustpilot.Modules.WidgetManagement||new m();window.Trustpilot.Modules.WidgetManagement.loading=true;window.Trustpilot.Modules.WidgetManagement.initializeOnPageLoad();})();}catch(a){(function(){function c(e){console.error("Error on bootstrap:"+e);var g="//widget.trustpilot.com/feedback/report-error";var f="error="+encodeURIComponent(e)+"&uri="+encodeURIComponent(document.URL);var d=document.createElement("img");d.src=g+"?"+f;}try{if(typeof(b)==="object"){c(b.message);}else{c(b);}}catch(b){console.error("Error on error reporting method:"+b);}})();}}());